# üöÄ Redis Cluster

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ **Redis Cluster** –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ Docker.

–≠—Ç–æ—Ç –∫–ª–∞—Å—Ç–µ—Ä —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 10 –Ω–æ–¥ (`redis-node1` ‚Ä¶ `redis-node10`) –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –ø–æ–¥–∫–ª—é—á–∞—é—â–∏—Ö—Å—è –∫ –Ω–µ–º—É —á–µ—Ä–µ–∑ –æ–±—â—É—é `external` —Å–µ—Ç—å Docker.

---

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```bash
.
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ redis-node*/         # –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Ç–æ–º–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–¥—ã
‚îî‚îÄ‚îÄ create-cluster.sh        # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
````

---

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
docker compose up -d
```

2. –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä (–æ–¥–∏–Ω —Ä–∞–∑):

```bash
bash create-cluster.sh
```

---

## üåê –°–µ—Ç—å

Redis Cluster –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π Docker-—Å–µ—Ç–∏ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º:

```yaml
networks:
  redis-cluster-net:
    name: redis-cluster-net
```

–ü–æ–¥–∫–ª—é—á–∏–≤ –ª—é–±–æ–π –≤–Ω–µ—à–Ω–∏–π –ø—Ä–æ–µ–∫—Ç –∫ —ç—Ç–æ–π —Å–µ—Ç–∏, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä –∫–∞–∫ –≤–Ω–µ—à–Ω–∏–π Redis:

```ini
session.save_path = "tcp://redis-node1:6379?prefix=my_project:"
```

---

## ‚ôªÔ∏è –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

–ö–ª–∞—Å—Ç–µ—Ä –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö –Ω–æ–¥:

1. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã `redis-node11`, `redis-node12`, ...
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `redis-cli --cluster add-node` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏—Ö –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –∫–ª–∞—Å—Ç–µ—Ä—É.
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `reshard` –¥–ª—è –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–ª–æ—Ç–æ–≤.

---

## ‚ùìFAQ

**–°–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ Redis Cluster?**

> Redis Cluster —Å 10 –Ω–æ–¥–∞–º–∏ –±–µ–∑ —Ç—Ä—É–¥–∞ –º–æ–∂–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –¥–µ—Å—è—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤, –µ—Å–ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∞ —Ä–∞–∑—É–º–Ω–∞—è. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã (`prefix=`) –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

**–ú–æ–∂–Ω–æ –ª–∏ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä?**

> ‚úÖ –î–∞. Redis –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–¥ –≤ —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–ª–∞—Å—Ç–µ—Ä –∏ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤.

**–ú–æ–∂–Ω–æ –ª–∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ redis-node1:6379?**

> ‚úÖ –î–∞. –í–∞–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è —Ö–æ—Ç—è –±—ã –∫ –æ–¥–Ω–æ–π –∏–∑ –Ω–æ–¥, –∫–ª–∞—Å—Ç–µ—Ä —Å–∞–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –∑–∞–ø—Ä–æ—Å—ã –ø–æ —Å–ª–æ—Ç–∞–º.

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

* [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Redis Cluster](https://redis.io/docs/management/scaling/)
* [redis-cli --cluster](https://redis.io/docs/manual/scaling/#using-the-redis-cli-tool)
