–í–æ—Ç —É–ª—É—á—à–µ–Ω–Ω—ã–π –∏ –±–æ–ª–µ–µ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π README –¥–ª—è —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, —Å —É—á—ë—Ç–æ–º –≤—Å–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Å–∫—Ä–∏–ø—Ç–æ–≤:

---

# üöÄ Redis Cluster on Docker

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è **Redis Cluster** –≤ Docker-–æ–∫—Ä—É–∂–µ–Ω–∏–∏.

–ö–ª–∞—Å—Ç–µ—Ä —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ **10 –Ω–æ–¥** (`redis-node1` ‚Ä¶ `redis-node10`) –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –ø–æ–¥–∫–ª—é—á–∞—é—â–∏—Ö—Å—è —á–µ—Ä–µ–∑ –æ–±—â—É—é –≤–Ω–µ—à–Ω—é—é Docker-—Å–µ—Ç—å.

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
.
‚îú‚îÄ‚îÄ .gitignore                 # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç runtime-–¥–∞–Ω–Ω—ã–µ Redis
‚îú‚îÄ‚îÄ create-cluster.sh          # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
‚îú‚îÄ‚îÄ reset-cluster.sh           # –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–±—Ä–æ—Å–∞ –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞
‚îú‚îÄ‚îÄ docker-compose.yml         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö 10 –Ω–æ–¥
‚îú‚îÄ‚îÄ README.md                  # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ data/                      # (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ) —Ç–æ–º–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–æ–¥
    ‚îú‚îÄ‚îÄ redis-node1/
    ‚îú‚îÄ‚îÄ redis-node2/
    ‚îî‚îÄ‚îÄ ...
```

---

## ‚öôÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
docker compose up -d
```

2Ô∏è‚É£ **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π –∫–ª–∞—Å—Ç–µ—Ä** (–Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞):

```bash
bash create-cluster.sh
```

---

## ‚ôªÔ∏è –°–±—Ä–æ—Å –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä (—Å —É–¥–∞–ª–µ–Ω–∏–µ–º –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö):

```bash
bash reset-cluster.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:

* –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –¥–∞–Ω–Ω—ã–º–∏
* –û—á–∏—â–∞–µ—Ç –ø–∞–ø–∫—É `./data`
* –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
* –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç `create-cluster.sh` –∑–∞–Ω–æ–≤–æ

---

## üåê –°–µ—Ç—å –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–ö–ª–∞—Å—Ç–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π —Å–µ—Ç–∏:

```yaml
networks:
  redis-cluster-net:
    name: redis-cluster-net
```

–ß—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

* –ü–æ–¥–∫–ª—é—á–∏ –∏—Ö –∫ —Å–µ—Ç–∏ `redis-cluster-net`
* –ò—Å–ø–æ–ª—å–∑—É–π –ª—é–±–æ–π –∏–∑ –Ω–æ–¥:

```ini
tcp://redis-node1:6379?prefix=my_project:
```

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –Ω–æ–¥:

1. –û–±–Ω–æ–≤–∏ `docker-compose.yml`, –¥–æ–±–∞–≤–∏–≤ `redis-node11`, `redis-node12` –∏ —Ç. –¥.
2. –í—ã–ø–æ–ª–Ω–∏:

   ```bash
   redis-cli --cluster add-node redis-node11:6379 redis-node1:6379
   ```
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏ —Å–ª–æ—Ç—ã:

   ```bash
   redis-cli --cluster reshard redis-node1:6379
   ```

---

## ‚ùì FAQ

**–ú–æ–∂–Ω–æ –ª–∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤?**
‚úÖ –î–∞! –ò—Å–ø–æ–ª—å–∑—É–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ `prefix` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, —á—Ç–æ–±—ã —Ä–∞–∑–¥–µ–ª–∏—Ç—å –∫–ª—é—á–∏.

**–ö –∫–∞–∫–æ–π –Ω–æ–¥–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è?**
‚úÖ –ö –ª—é–±–æ–π. Redis Cluster —Å–∞–º –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –Ω—É–∂–Ω—É—é –Ω–æ–¥—É –ø–æ —Å–ª–æ—Ç–∞–º.

**–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `data/`?**
–í—Å–µ runtime-–¥–∞–Ω–Ω—ã–µ (`dump.rdb`, `appendonly.aof`, `nodes.conf`) ‚Äî **—ç—Ç–∏ —Ñ–∞–π–ª—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è –≤ Git**.

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

* [Redis Cluster ‚Äî –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://redis.io/docs/management/scaling/)
* [redis-cli ‚Äî –†–∞–±–æ—Ç–∞ —Å –∫–ª–∞—Å—Ç–µ—Ä–æ–º](https://redis.io/docs/manual/scaling/#using-the-redis-cli-tool)
